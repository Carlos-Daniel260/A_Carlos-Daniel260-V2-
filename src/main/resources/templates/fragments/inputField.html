<html>
    <body>
        <form>
            <th:block th:fragment="input (label, name, type)">
                <div th:with="valid=${!#fields.hasErrors(name)}"
                     th:class="${'form-group' + (valid ? '' : ' has-error')}"
                     class="form-group">
                    <h3 class="col-lg-3 col-sm-3 control-label h4" style="margin-top: -3px;" th:text="${label}">Label</h3>
                    <div class="col-sm-9">
                        <div class="" th:switch="${type}">
                            <textarea th:case="'textarea'" required="true" class="form-control rounded-lg" th:field="*{__${name}__}" th:placeholder="${label}" style="resize:none"/>
                            <input th:case="'text'" required="true" class="form-control rounded-lg" type="text" th:field="*{__${name}__}" />
                            <input th:case="'number'" maxlength="10" pattern=".{5,10}" title="5 to 10 characters" class="form-control rounded-lg" required type="number" th:field="*{__${name}__}" />
                            <input th:case="'text_required'" class="form-control rounded-lg" required type="text" th:field="*{__${name}__}" />
                            <input th:case="'username'"  class="form-control rounded-lg" required type="text" th:field="*{__${name}__}" />
                            <input th:case="'password'" class="form-control rounded-lg" type="password" th:field="*{__${name}__}" />
                            <input th:case="'email'" class="form-control rounded-lg" required type="email" th:field="*{__${name}__}" />
                            <input th:case="'time'" class="form-control rounded-lg" type="time" th:field="*{__${name}__}"
                                   placeholder="HH-MM Hrs" title="Enter a date in this format: HH-MM"
                                   />
                            <input th:case="'checkbox'" class="form-control rounded-lg" type="checkbox" th:value="1" th:field="*{__${name}__}" />
                            <input th:case="'date'" class="form-control rounded-lg" type="date" th:field="*{__${name}__}" />
                        </div>
                        <span th:if="${valid}"
                              class="glyphicon glyphicon-ok form-control-feedback"
                              aria-hidden="true"></span>  
                        <th:block th:if="${!valid} and ${name} != 'zipcode' and ${name} != 'email'">
                            <span
                                class="glyphicon glyphicon-remove form-control-feedback"
                                aria-hidden="true"></span>
                            <span class="help-inline" th:errors="*{__${name}__}">Error</span>
                        </th:block>
                    </div>
                </div>
            </th:block>
        </form>
    </body>
</html>
